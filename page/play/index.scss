@mixin player {
	display: flex;
	gap: 1rem;

	align-items: center;

	position: relative;

	&[ui-clickable]:hover {
		cursor: pointer;

		> ui-name {
			color: var(--color-primary-dimmed);
		}
	}

	> ui-avatar {
		display: block;
		height: 5rem;
		width: 5rem;

		border-radius: 50%;

		overflow: hidden;
	}

	> ui-name {
		display: block;
		flex: 1;

		color: var(--color-primary);
	}

	> ui-menu {
		display: flex;
		gap: 0.5rem;
		
		position: absolute;
		inset: 0;
		align-items: center;
		justify-content: end;

		backdrop-filter: blur(1px);

		> ui-action {
			@include action;

			padding: 0.5rem;

			&[ui-secondary],
			&:not([ui-secondary]):hover {
				background: var(--color-background-dimmed);
			}
		}
	}
}

> ui-game {
	display: flex;
	height: 100%;
	align-items: center;
	justify-content: center;

	// components
	ui-chat {
		display: flex;
		flex-direction: column;
		gap: 1rem;

		align-self: end;

		> ui-chat-messages {
			display: flex;
			flex: 1;

			flex-direction: column;

			overflow-y: auto;

			> ui-chat-message {
				display: flex;
				padding: 0.5rem;
				gap: 0.25rem;

				color: var(--color-primary);
				font-size: 0.8rem;

				&:nth-child(even) {
					background: var(--color-background);
				}

				&[ui-system] {
					color: var(--color-primary-dimmed);
				}

				> ui-message {
					display: block;
					flex: 1;
				}

				> ui-time {
					font-size: 0.5rem;
				}
			}
		}
	}

	// states
	> ui-not-found {
		display: block;
		padding: 2rem;

		border-radius: 2rem;
		background: var(--color-background-dimmed);

		box-shadow: var(--box-shadow);

		> ui-text {
			display: block;
			margin-bottom: 1rem;
			padding-block: 1rem;

			color: var(--color-primary);

			text-align: center;
			font-size: 1.5rem;
		}

		> ui-action {
			@include action;
		}
	}

	> ui-connection-lost {
		display: block;
		padding: 2rem;

		border-radius: 2rem;
		background: var(--color-background-dimmed);

		box-shadow: var(--box-shadow);

		> ui-text {
			display: block;
			margin-bottom: 1rem;
			padding-block: 1rem;
			
			color: var(--color-primary);

			text-align: center;
			font-size: 1.5rem;
		}

		> ui-action-group {
			display: flex;
			gap: 1rem;

			> ui-action {
				@include action;
			}
		}
	}

	> ui-direct-join {
		display: block;
		padding: 2rem;

		border-radius: 2rem;
		background: var(--color-background-dimmed);

		box-shadow: var(--box-shadow);

		@import '../shared/configure-player/index.scss';

		> ui-action {
			@include action;

			margin-top: 2rem;
		}
	}

	> ui-lobby {
		display: grid;
		height: 80%;
		width: 80%;
		max-width: 50rem;

		padding: 2rem;
		gap: 1rem;

		border-radius: 2rem;
		background: var(--color-background-dimmed);

		box-shadow: var(--box-shadow);

		grid-template-areas:
			'versus versus'
			'settings spectators'
			'settings chat';
		grid-template-columns: 1fr 1fr;
		grid-template-rows: auto 1fr 1fr;

		> ui-versus {
			grid-area: versus;

			display: flex;
			gap: 1rem;
			padding: 2rem;

			border-radius: 2rem;
			background: var(--color-background);

			> ui-player {
				@include player;

				width: calc(50% - 0.5rem);

				&:last-child {
					flex-direction: row-reverse;
					text-align: end;
				}
			
				&[ui-missing] {
					> ui-avatar {
						border: 1px dashed var(--color-primary);
					}
			
					> ui-name {
						font-style: italic;
					}
				}
			}
		}

		> ui-spectators {
			grid-area: spectators;

			display: flex;
			flex-direction: column;
			height: 100%;

			overflow: hidden;

			> ui-title {
				display: block;

				color: var(--color-primary);
				font-size: 1.2rem;
			}

			> ui-hint {
				display: block;
				margin-top: 0.5rem;

				color: var(--color-primary-dimmed);
				font-size: 0.8rem;
			}

			> ui-spectator-list {
				display: flex;
				flex-direction: column;
				gap: 0.5rem;
				margin-top: 1rem;

				overflow-y: auto;

				> ui-player {
					@include player;

					> ui-avatar {
						height: 3rem;
						width: 3rem;
					}
				}
			}
		}

		> ui-settings {
			grid-area: settings;

			display: flex;
			flex-direction: column;
			gap: 1rem;

			&[ui-disabled] {
				opacity: 0.5;

				pointer-events: none;
				cursor: not-allowed;
			}

			> ui-title {
				display: block;
				color: var(--color-primary);
				font-size: 1.2rem;
			}

			> ui-configurable {
				display: flex;
				flex-direction: column;
				gap: 1rem;

				flex: 1;

				overflow-y: auto;

				> ui-setting {
					display: block;
	
					> ui-label {
						display: block;
						margin-bottom: 0.5rem;
	
						color: var(--color-primary);
					}
	
					> ui-hint {
						display: block;
						margin-bottom: 0.5rem;
	
						color: var(--color-primary-dimmed);
						font-size: 0.8rem;
					}
	
					> ui-radio-select {
						display: flex;
						gap: 0.5rem;
	
						> ui-option {
							display: block;
							flex: 1;
							padding: 0.5rem;
	
							border-radius: 2rem;
							border: 1px solid transparent;
	
							color: var(--color-primary);
							background: var(--color-background);
	
							text-align: center;
	
							cursor: pointer;
	
							&:hover {
								border: 1px solid var(--color-primary);
							}
	
							&[ui-active] {
								background: var(--color-primary);
								color: var(--color-background);
							}
						}
					}
				}
			}

			> ui-action {
				@include action;
			}
		}

		> ui-chat {
			grid-area: chat;

			height: calc(100% - 2rem);
			padding: 1rem;
			
			border: 2px solid var(--color-background);
			border-radius: 2rem;

			overflow: hidden;
		}
	}
}
